(this.webpackJsonpbattlefiel=this.webpackJsonpbattlefiel||[]).push([[0],{29:function(e,t,n){e.exports={gamePage:"Game_gamePage__b1iBR",homeContainer:"Game_homeContainer__1bqPF",gameWelcome:"Game_gameWelcome__1uBQh",playerNameRow:"Game_playerNameRow__3Y2ex",node:"Game_node__JQhqo",gridRow:"Game_gridRow__cQDHF",fleetBlock:"Game_fleetBlock__1Ycjz",ship:"Game_ship__263m2",miss:"Game_miss__-56vl",hit:"Game_hit__181lF",fleetTitle:"Game_fleetTitle__uSrHA",fleetBlockContainer:"Game_fleetBlockContainer__1A2GL",myPlayerContainer:"Game_myPlayerContainer__3CJt7",indicators:"Game_indicators__l2BGE",break:"Game_break__1UR1y"}},57:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var i,r,a,c=n(0),s=n.n(c),o=n(32),u=n.n(o),l=(n(57),n(15)),d=n(22),h=n(23);!function(e){e[e.HOME=0]="HOME",e[e.PLACEMENT=1]="PLACEMENT",e[e.LIVE=2]="LIVE",e[e.OVER=3]="OVER"}(i||(i={})),function(e){e[e.EMPTY=0]="EMPTY",e[e.FLEET=1]="FLEET",e[e.HIT=2]="HIT",e[e.MISS=3]="MISS"}(r||(r={})),function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"}(a||(a={}));var f=function(){function e(t){Object(d.a)(this,e),this.name=void 0,this.name="player_"+t}return Object(h.a)(e,[{key:"setName",value:function(e){this.name=e}}]),e}(),j=function(){function e(){Object(d.a)(this,e),this.rows=void 0,this.columns=void 0,this.grid=void 0,this.rows=10,this.columns=10,this.grid=[],this.initGrid()}return Object(h.a)(e,[{key:"initGrid",value:function(){for(var e=0;e<this.columns;e++){for(var t=[],n=0;n<this.rows;n++)t.push(r.EMPTY);this.grid.push(t)}}},{key:"getLength",value:function(){return this.grid[0].length}},{key:"getHeight",value:function(){return this.grid.length}},{key:"setCellState",value:function(e,t,n){this.grid[e][t]=n}}]),e}(),b=function(){function e(t,n){var i=this;Object(d.a)(this,e),this.xPosition=void 0,this.yPosition=void 0,this.direction=void 0,this.size=void 0,this.placed=void 0,this.getFleetBlocks=function(){var e=[[i.xPosition,i.yPosition]];if(i.direction===a.HORIZONTAL)for(var t=0;t<i.size-1;)t++,e.push([i.xPosition,i.yPosition+t]);else if(i.direction===a.VERTICAL)for(var n=0;n<i.size-1;)n++,e.push([i.xPosition+n,i.yPosition]);return e},this.xPosition=-1,this.yPosition=-1,this.direction=t,this.size=n,this.placed=!1}return Object(h.a)(e,[{key:"setPosition",value:function(e,t){this.xPosition=e,this.yPosition=t,this.placed=!0}}]),e}(),m=[{direction:a.HORIZONTAL,sizes:[2]},{direction:a.VERTICAL,sizes:[1,2]}],O=function(){var e=[];return m.forEach((function(t){t.sizes.forEach((function(n){return e.push(new b(t.direction,n))}))})),e},g=function(e,t,n,i){return[[e,t+1],[e,t-1],[e+1,t],[e-1,t],[e+1,t+1],[e-1,t-1],[e+1,t-1],[e-1,t+1]].filter((function(e){var t=Object(l.a)(e,2),r=t[0],a=t[1];return r>=0&&a>=0&&r<n&&a<i}))},v=function(e,t,n,i){var r=[[e,t]];if(e<0&&t<0)return[];if(i===a.HORIZONTAL)for(var c=0;c<n-1;)r.push([e,t+ ++c]);else if(i===a.VERTICAL)for(var s=0;s<n-1;)r.push([e+ ++s,t]);return r},p=function(){function e(){Object(d.a)(this,e),this.mode=void 0,this.entities=void 0,this.turn=void 0,this.mode=i.HOME,this.turn=0,this.entities=[{player:new f(1),batteground:new j,fleets:O()},{player:new f(2),batteground:new j,fleets:O()}]}return Object(h.a)(e,[{key:"setGameMode",value:function(e){this.mode=e}},{key:"setTurn",value:function(e){this.turn=e}}]),e}(),x=n(18),E=n(68),y=n(51),C=n(69),T=n(66),_=n(2),N=n(29),P=function(e){return Object(_.jsxs)("div",{className:N.homeContainer,children:[Object(_.jsx)("div",{className:N.gameWelcome,children:"Welcome to Battlefield"}),e.entities.map((function(t,n){return Object(_.jsx)(L,Object(x.a)({index:n},e),n)})),Object(_.jsx)(y.a,{type:"primary",shape:"round",size:"large",onClick:function(){return e.onModeChange(i.PLACEMENT)},children:"Enter Game"})]})},L=function(e){var t=e.entities,n=e.onEntitiesChange,i=e.index,r=Object(c.useState)(t[i].player.name),a=Object(l.a)(r,2),s=a[0],o=a[1];return Object(_.jsxs)(C.a,{className:N.playerNameRow,children:[Object(_.jsxs)("span",{children:["Player ",i+1," : "]}),Object(_.jsx)(T.a,{value:s,onChange:function(e){o(e.target.value),t[i].player.name=e.target.value,n(t)}})]})},I=n(14),S=n(4),M=n.n(S),R=n(29),k=function(e){var t=e.entities.reduce((function(e,t,n){return t.batteground.grid.every((function(e){return!e.includes(r.FLEET)}))?n:-1}),-1);return t<0?Object(_.jsx)(_.Fragment,{children:"Game Over"}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("p",{children:["Game Over, winner is ",e.entities[t].player.name]}),e.entities.forEach((function(e,t){return Object(_.jsx)("div",{children:e.batteground.grid.map((function(e,t){return Object(_.jsx)("div",{className:R.gridRow,children:e.map((function(e,t){var n;return Object(_.jsx)("div",{className:M()(R.node,(n={},Object(I.a)(n,R.fleet,e===r.FLEET),Object(I.a)(n,R.miss,e===r.MISS),Object(I.a)(n,R.hit,e===r.HIT),n))},t)}))},t)}))},t)}))]})},w=n(29),F=function(e){var t=e.entities[e.turn],n=t.batteground.grid,s=Object(c.useState)(-1),o=Object(l.a)(s,2),u=o[0],d=o[1],h=function(n,i){var a,c,s,o=(a=t.fleets,c=n,s=i,a.filter((function(e){return e.xPosition===c&&e.yPosition===s})));if(!o||!o.length){var d=t.fleets[u];(function(e,t,n,i,r,a){if(n>=r||i>=a)return!1;var c=e.map((function(e){return v(e.xPosition,e.yPosition,e.size,e.direction)})).filter((function(e){return e.length>0})).flat().map((function(e){return[e].concat(g(e[0],e[1],r,a))})).flat(),s=v(n,i,t.size,t.direction),o=!1;if(s.forEach((function(e){var t=Object(l.a)(e,2),n=t[0],i=t[1];(n>=r||i>=a)&&(o=!0)})),o)return!1;for(var u=!1,d=function(e){var t=Object(l.a)(c[e],2),n=t[0],i=t[1];s.forEach((function(e){var t=Object(l.a)(e,2),r=t[0],a=t[1];n===r&&i===a&&(u=!0)}))},h=0;h<c.length;h++)d(h);return!u})(t.fleets,d,n,i,t.batteground.getLength(),t.batteground.getHeight())&&(d.setPosition(n,i),d.getFleetBlocks().forEach((function(e){var n=Object(l.a)(e,2),i=n[0],a=n[1];return t.batteground.setCellState(i,a,r.FLEET)})),e.onEntitiesChange(e.entities.map((function(e){return Object(x.a)({},e)}))))}},f=e.turn>=e.entities.length-1;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("p",{children:["Setting grid for ",Object(_.jsx)("strong",{children:t.player.name})]}),n.map((function(e,t){return Object(_.jsx)("div",{className:w.gridRow,children:e.map((function(e,n){return Object(_.jsx)("div",{className:M()(w.node,Object(I.a)({},w.ship,e===r.FLEET)),onDragOver:function(e){return e.preventDefault()},onDrop:function(e){return h(t,n)}},t+n)}))},t)})),Object(_.jsx)("p",{className:w.fleetTitle,children:"Fleets"}),Object(_.jsx)("div",{className:w.fleetBlockContainer,children:t.fleets.map((function(e,t){return function(e,t,n){var i=30,r=30;return e.direction===a.HORIZONTAL?r*=e.size:e.direction===a.VERTICAL&&(i*=e.size),e.placed?null:Object(_.jsx)("div",{className:w.fleetBlock,style:{height:i,width:r},draggable:!0,onDragStart:function(){return n(t)}},t)}(e,t,d)}))}),f?Object(_.jsx)(y.a,{type:"primary",disabled:!t.fleets.every((function(e){return e.placed})),onClick:function(){e.onModeChange(i.LIVE),e.onTurnChange(0)},children:"Start Game"}):Object(_.jsx)(y.a,{type:"primary",disabled:!t.fleets.every((function(e){return e.placed})),onClick:function(){return e.onTurnChange(1-e.turn)},children:"Move to next player"})]})},G=n(29),H=["#faad14","#52c41a"],A=function(e){var t=1-e.turn,n=e.entities[t],a=n.batteground.grid,c=e.entities[e.turn],s=function(t,c){switch(a[t][c]){case r.HIT:case r.MISS:return;case r.FLEET:n.batteground.setCellState(t,c,r.HIT);break;default:n.batteground.setCellState(t,c,r.MISS)}e.onEntitiesChange(e.entities.map((function(e){return Object(x.a)({},e)}))),setTimeout((function(){e.entities.some((function(e){var t=!0;return e.batteground.grid.forEach((function(e,n){e.forEach((function(e,n){e===r.FLEET&&(t=!1)}))})),t}))?e.onModeChange(i.OVER):e.onTurnChange(1-e.turn)}),500)};return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("p",{children:["Turn for ",Object(_.jsx)("strong",{children:c.player.name})]}),Object(_.jsx)("div",{style:{border:"2px solid ".concat(H[t]),padding:"15px"},children:a.map((function(e,t){return Object(_.jsx)("div",{className:G.gridRow,children:e.map((function(e,n){var i;return Object(_.jsx)("div",{className:M()(G.node,(i={},Object(I.a)(i,G.miss,e===r.MISS),Object(I.a)(i,G.hit,e===r.HIT),i)),onClick:function(){return s(t,n)}},t+n)}))},t)}))}),Object(_.jsxs)("div",{className:G.myPlayerContainer,children:[Object(_.jsx)("p",{children:"My battleground status"}),c.batteground.grid.map((function(e,t){return Object(_.jsx)("div",{className:G.gridRow,children:e.map((function(e,n){var i;return Object(_.jsx)("div",{className:M()(G.node,(i={},Object(I.a)(i,G.ship,e===r.FLEET),Object(I.a)(i,G.hit,e===r.HIT),Object(I.a)(i,G.miss,e===r.MISS),i))},""+t+n)}))},t)}))]}),Object(_.jsxs)("div",{className:G.indicators,children:[Object(_.jsx)("div",{className:M()(G.node,G.ship)})," Fleet position",Object(_.jsx)("div",{className:M()(G.node,G.hit)})," Correct hit",Object(_.jsx)("div",{className:M()(G.node,G.miss)})," Missed hit"]})]})},B=n(29),V=function(e){switch(e.mode){case i.HOME:return Object(_.jsx)(P,Object(x.a)({},e));case i.PLACEMENT:return Object(_.jsx)(F,Object(x.a)({},e));case i.LIVE:return Object(_.jsx)(A,Object(x.a)({},e));case i.OVER:return Object(_.jsx)(k,Object(x.a)({},e))}return!1},z=function(e){return Object(_.jsx)(E.a,{className:B.gamePage,children:Object(_.jsx)(E.a.Content,{children:V(e)})})};n(61),n(62);var D=function(){var e=new p,t=Object(c.useState)(e.mode),n=Object(l.a)(t,2),i=n[0],r=n[1],a=Object(c.useState)(e.entities),s=Object(l.a)(a,2),o=s[0],u=s[1],d=Object(c.useState)(e.turn),h=Object(l.a)(d,2),f=h[0],j=h[1],b=Object(c.useCallback)((function(e){u(e)}),[]);return Object(_.jsx)("div",{className:"App",children:Object(_.jsx)(z,{mode:i,entities:o,turn:f,onModeChange:r,onEntitiesChange:b,onTurnChange:j})})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),a(e),c(e)}))};u.a.render(Object(_.jsx)(s.a.StrictMode,{children:Object(_.jsx)(D,{})}),document.getElementById("root")),Z()}},[[63,1,2]]]);
//# sourceMappingURL=main.3b01206e.chunk.js.map